

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ru" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ru" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Обмен данными с ЕСИА &mdash; Документация elvoucher 1</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Алфавитный указатель" href="genindex.html" />
    <link rel="search" title="Поиск" href="search.html" />
    <link rel="next" title="Обмен данными с ЕГИС ОТБ" href="EGISOTB.html" />
    <link rel="prev" title="Обмен данными с удостоверяющим центром" href="UC.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> elvoucher
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Структура информационной системы &quot;Электронная путевка&quot;:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="main.html">Основная информация о системе</a></li>
<li class="toctree-l1"><a class="reference internal" href="program.html">Программное обеспечение системы</a></li>
<li class="toctree-l1"><a class="reference internal" href="arch.html">Функциональная архитектура системы</a></li>
<li class="toctree-l1"><a class="reference internal" href="POK.html">Подсистема оперативного контроля</a></li>
<li class="toctree-l1"><a class="reference internal" href="PODIR.html">Подсистема информирования и доступа к информационным ресурсам</a></li>
<li class="toctree-l1"><a class="reference internal" href="POFO.html">Подсистема Формирования отчетов</a></li>
<li class="toctree-l1"><a class="reference internal" href="POTOD.html">Подсистема оперативной транзакционной обработки данных</a></li>
<li class="toctree-l1"><a class="reference internal" href="POSHD.html">Подсистема ведения ПОСХД</a></li>
<li class="toctree-l1"><a class="reference internal" href="PONSI.html">Подсистема ведения НСИ</a></li>
</ul>
<p class="caption"><span class="caption-text">Взаимодействие с внешними системами:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="web-servis.html">Обмен данными с ИС туроператоров, турагентов и финансовых гарантов</a></li>
<li class="toctree-l1"><a class="reference internal" href="EFRT.html">Обмен данными с ЕФРТ</a></li>
<li class="toctree-l1"><a class="reference internal" href="mail.html">Почтовое взаимодействие с внешними системами</a></li>
<li class="toctree-l1"><a class="reference internal" href="AISTOUR.html">Обмен данными с АИС Туризм</a></li>
<li class="toctree-l1"><a class="reference internal" href="SISROSTOUR.html">Обмен данными с СИС Ростуризм</a></li>
<li class="toctree-l1"><a class="reference internal" href="UC.html">Обмен данными с удостоверяющим центром</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Обмен данными с ЕСИА</a></li>
<li class="toctree-l1"><a class="reference internal" href="EGISOTB.html">Обмен данными с ЕГИС ОТБ</a></li>
</ul>
<p class="caption"><span class="caption-text">Функциональные структуры системы</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="message.html">Обмен сообщениями между пользователями ИС Электронная путевка</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">elvoucher</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Обмен данными с ЕСИА</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/ESIA.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>Обмен данными с ЕСИА<a class="headerlink" href="#id1" title="Ссылка на этот заголовок">¶</a></h1>
<p>Информационная система ЕСИА предназначена для обеспечения однократной аутентификации граждан в государственных информационных системах с использованием технологии SSO.</p>
<p>Взаимодействие пользователя с ЕСИА, его регистрация, аутентификация и поддержание сессий в активном состоянии осуществляется в соответствии с руководством пользователя ЕСИА (см. <a class="reference external" href="http://minsvyaz.ru/ru/documents/4240/">http://minsvyaz.ru/ru/documents/4240/</a>).</p>
<p>Интеграция с ЕСИА реализована на основании методических рекомендаций Минкомсвязи (см. <a class="reference external" href="http://minsvyaz.ru/ru/documents/4243/">http://minsvyaz.ru/ru/documents/4243/</a>).</p>
<p>Для идентификации туристов и предоставления им подробной информации о путевках Система взаимодействует с ЕСИА по следующему алгоритму:</p>
<ol class="arabic simple">
<li>пользователь инициализирует сессию аутентификации с Системой посредством перехода по специальной ссылке;</li>
<li>Система получает запрос на аутентификацию и перенаправляет на точку авторизации в ЕСИА;</li>
<li>пользователь авторизуется в ЕСИА. Далее осуществляется его перенаправление на страницу Системы с перечнем путевок, относящихся к идентифицированному физическому лицу. Идентификация осуществляется по номеру документа, удостоверяющему личность и дату рождения. Если данные поля в профиле пользователя ЕСИА не заполнены, то идентификация не будет осуществлена;</li>
<li>после идентификации пользователя ему предоставляется доступ к путевкам, идентифицированным по его персональным данным.</li>
</ol>
<p>Техническое взаимодействие Системы с ЕСИА осуществляется по следующему алгоритму:</p>
<ol class="arabic simple">
<li>при попытке входа через ЕСИА, Система посредством сервиса авторизации запрашивает у пользователя разрешение на доступ к соответствующим ресурсам;</li>
<li>Система получает разрешение на доступ (authorization grant) в виде авторизационного кода. Далее Система запрашивает маркер доступа, предъявив авторизационный код сервису авторизации;</li>
<li>сервис авторизации аутентифицирует Систему, проверяет авторизационный код и выдает маркер доступа и маркер обновления;</li>
<li>Система запрашивает у поставщика ресурса защищенный ресурс, предъявляя маркер доступа;</li>
<li>поставщик ресурса проверяет маркер доступа, если он валиден, то разрешает доступ к защищенному ресурсу;</li>
<li>Система вновь запрашивает с помощью выданного ранее маркера доступ к защищенному ресурсу. Поставщик ресурса проверяет маркер, обнаруживает, что срок его действия истек, возвращает сообщение об ошибке. Система обращается к сервису авторизации за получением нового маркера доступа, предъявляя маркер обновления. Сервис авторизации проверяет валидность маркера обновления и возвращает два новых маркера: доступа и обновления;</li>
</ol>
<p>7) после получения Системой маркера доступа, она может неоднократно обращаться за получением соответствующего защищенного ресурса, пока не истечет срок действия этого маркера. По истечении срока действия маркера доступа Системе потребуется получить новый маркер доступа.
Система использует один тип защищенных ресурсов – набор персональных идентификационных данных.
Взаимодействие Системы с ЕСИА осуществляется через протокол авторизации Oauth. На серверах приложений размещаются закрытые и открытые ключи для подписания запросов от Системы к ЕСИА. Открытый ключ передается и регистрируется в ЕСИА при регистрации информационной системы согласно регламенту взаимодействия с ЕСИА (см. <a class="reference external" href="http://minsvyaz.ru/ru/documents/4244/">http://minsvyaz.ru/ru/documents/4244/</a>).</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="EGISOTB.html" class="btn btn-neutral float-right" title="Обмен данными с ЕГИС ОТБ" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="UC.html" class="btn btn-neutral" title="Обмен данными с удостоверяющим центром" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, dmitrii.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1',
            LANGUAGE:'ru',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>